(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{571:function(e,t,s){"use strict";s.r(t);var n=s(42),r=Object(n.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"liferecycle"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#liferecycle"}},[e._v("#")]),e._v(" LifeRecycle")]),e._v(" "),s("h3",{attrs:{id:"实现监听页面钩子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现监听页面钩子"}},[e._v("#")]),e._v(" 实现监听页面钩子")]),e._v(" "),s("p",[e._v("参考：https://www.jianshu.com/p/3edfa7d694e7")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("在"),s("strong",[e._v("MaterialApp")]),e._v("中定义一个"),s("strong",[e._v("RouteObserver")]),e._v("对象")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\nfinal RouteObserver<Route<dynamic>> routeObserver = RouteObserver();\n\nclass MyApp extends StatelessWidget {\n    ... \\\\此处省略一些代码\n\n    Widget _buildMaterialApp() => MaterialApp(\n      initialRoute: '/',\n      navigatorObservers: [routeObserver], //添加路由观察者\n      onGenerateRoute: _onGenerateRoute);\n}\n")])])])]),e._v(" "),s("li",[s("p",[e._v("在B页面中混淆"),s("strong",[e._v("RouteAware")]),e._v(", 并注册"),s("strong",[e._v("RouteObserver")])]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("class B extends StatefulWidget {\n     B({Key key}) : super(key: key);\n")])])])])]),e._v(" "),s("p",[e._v("}")]),e._v(" "),s("p",[e._v("class BState extends State"),s("B",[e._v("  with RouteAware {")])],1),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(' @override\n void didChangeDependencies() {\n   routeObserver.subscribe(this, ModalRoute.of(context)); //订阅\n   super.didChangeDependencies();\n }\n\n @override\n void didPush() {\n   debugPrint("------\x3e didPush");\n   super.didPush();\n }\n\n @override\n void didPop() {\n   debugPrint("------\x3e didPop");\n   super.didPop();\n }\n\n @override\n void didPopNext() {\n   debugPrint("------\x3e didPopNext");\n   super.didPopNext();\n }\n')])])]),s("p",[e._v('@override\nvoid didPushNext() {\ndebugPrint("------\x3e didPushNext");\nsuper.didPushNext();\n}')]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[e._v(" @override\n void dispose() {\n   routeObserver.unsubscribe(this); //取消订阅\n   super.dispose();\n }\n")])])]),s("p",[e._v("}")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);